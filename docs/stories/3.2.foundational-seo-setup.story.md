# Story 3.2: Foundational SEO Setup

## Status
In progress

## Story
**As a** business owner,
**I want** basic SEO features implemented on the website,
**so that** search engines can effectively crawl and rank my pages, driving organic traffic.

## Acceptance Criteria
1. Each page has a unique and descriptive <title> tag.
2. Each page has a unique and compelling meta description tag.
3. A sitemap.xml file is automatically generated.
4. A robots.txt file is configured.
5. Next.js metadata API is used to manage all SEO-related tags.

## Tasks / Subtasks
- [ ] Task 1 (AC: 1, 2, 5)
  - [ ] Research Next.js 13+ metadata API patterns and best practices
  - [ ] Create metadata configuration for homepage (/)
  - [ ] Create metadata configuration for service pages (consultation, document-drafting, corporate-retainer, legal-notice)
  - [ ] Create metadata configuration for legal pages (terms-of-service, privacy-policy)
  - [ ] Create metadata configuration for other pages (about, contact, pricing)
  - [ ] Test metadata generation and verify unique titles/descriptions
- [ ] Task 2 (AC: 3)
  - [ ] Install and configure sitemap generation package (next-sitemap or similar)
  - [ ] Configure sitemap to include all public pages
  - [ ] Set up automatic sitemap generation during build process
  - [ ] Test sitemap.xml generation and validate format
- [ ] Task 3 (AC: 4)
  - [ ] Create robots.txt file in public directory
  - [ ] Configure robots.txt to allow crawling of all pages
  - [ ] Add sitemap reference to robots.txt
  - [ ] Test robots.txt accessibility and format
- [ ] Task 4 (AC: 1, 2, 5)
  - [ ] Implement dynamic metadata for service pages based on service type
  - [ ] Add Open Graph meta tags for social media sharing
  - [ ] Add Twitter Card meta tags for Twitter sharing
  - [ ] Test metadata across different page types and scenarios
- [ ] Task 5 (AC: 1, 2, 3, 4, 5)
  - [ ] Create SEO testing utilities for development
  - [ ] Validate all pages have proper metadata in production build
  - [ ] Test sitemap and robots.txt in production environment
  - [ ] Document SEO implementation patterns for future development

## Dev Notes

### Previous Story Insights
- Analytics integration is in progress (Story 3.1) which may provide insights into page performance
- All service pages and legal pages are already created and functional
- Next.js App Router structure is established with proper page organization
- Project uses TypeScript and follows established component patterns
[Source: docs/stories/3.1.analytics-integration.story.md]

### Data Models
**SEO Metadata Structure:**
```typescript
// Next.js Metadata API Types
interface PageMetadata {
  title: string;
  description: string;
  keywords?: string[];
  openGraph?: {
    title: string;
    description: string;
    type: 'website';
    url: string;
    siteName: string;
  };
  twitter?: {
    card: 'summary_large_image';
    title: string;
    description: string;
  };
}

// Service Page Metadata
interface ServicePageMetadata extends PageMetadata {
  service: 'consultation' | 'document-drafting' | 'corporate-retainer' | 'legal-notice';
  pricing?: string;
  features?: string[];
}
```

### API Specifications
**No new API endpoints required** - This story focuses on frontend SEO implementation using Next.js built-in features.

### Component Specifications
**Metadata Configuration Components:**
- Use Next.js 13+ `generateMetadata` function in each page
- Implement dynamic metadata generation for service pages
- Create reusable metadata utilities in `src/lib/seo.ts`
- Follow established file naming conventions (kebab-case.tsx)

### File Locations
**New Files to Create:**
- `src/lib/seo.ts` - SEO utilities and metadata helpers
- `public/robots.txt` - Robots configuration file
- `next-sitemap.config.js` - Sitemap generation configuration

**Files to Modify:**
- `src/app/layout.tsx` - Add default metadata configuration
- `src/app/page.tsx` - Add homepage metadata
- `src/app/consultation/page.tsx` - Add service page metadata
- `src/app/document-drafting/page.tsx` - Add service page metadata
- `src/app/corporate-retainer/page.tsx` - Add service page metadata
- `src/app/legal-notice/page.tsx` - Add service page metadata
- `src/app/terms-of-service/page.tsx` - Add legal page metadata
- `src/app/privacy-policy/page.tsx` - Add legal page metadata
- `src/app/about/page.tsx` - Add about page metadata
- `src/app/contact/page.tsx` - Add contact page metadata
- `src/app/pricing/page.tsx` - Add pricing page metadata

### Testing Requirements
**SEO Testing Standards:**
- Test metadata generation in development and production builds
- Validate sitemap.xml format and accessibility
- Test robots.txt accessibility and format
- Verify unique titles and descriptions across all pages
- Test Open Graph and Twitter Card meta tags
- Validate metadata in browser developer tools

### Technical Constraints
**SEO Implementation Constraints:**
- Must use Next.js 13+ metadata API (not deprecated head tags)
- Sitemap must be generated automatically during build process
- Robots.txt must be accessible at `/robots.txt`
- All metadata must be server-side rendered for SEO crawlers
- Follow established TypeScript patterns and naming conventions
[Source: docs/architecture/03-2-frontend-tech-stack.md]

### Project Structure Notes
The current project structure follows Next.js App Router conventions with pages in `src/app/`. All SEO metadata will be implemented using the `generateMetadata` function in each page component, following the established patterns in the architecture.
[Source: docs/architecture/04-3-project-structure.md]

## Testing
- Unit tests for SEO utility functions
- Integration tests for metadata generation
- E2E tests for sitemap and robots.txt accessibility
- Manual testing of metadata in browser developer tools
- Validation of SEO meta tags using online SEO tools

## Change Log
| Date | Version | Description | Author |
| :---- | :---- | :---- | :---- |
| TBD | 1.0 | Initial story creation | Bob, Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*To be filled by QA agent* 